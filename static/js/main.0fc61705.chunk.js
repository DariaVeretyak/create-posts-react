(this["webpackJsonpreact-starter-pack"]=this["webpackJsonpreact-starter-pack"]||[]).push([[0],{21:function(t,e,s){},22:function(t,e,s){},23:function(t,e,s){},24:function(t,e,s){"use strict";s.r(e);var c=s(0),a=s.n(c),i=s(12),n=s.n(i),o=s(4),l=s(5),r=s(2),j=a.a.createContext(),b=function(t){var e=t.children,s=Object(c.useState)([]),a=Object(l.a)(s,2),i=a[0],n=a[1],b={posts:i,addedToPosts:function(t){n((function(e){return[].concat(Object(o.a)(e),[t])}))},removeItem:function(t){n(i.filter((function(e){return e.id!==t})))}};return Object(c.useEffect)((function(){null!==localStorage.getItem("post")&&n(JSON.parse(localStorage.getItem("post")||""))}),[]),Object(c.useEffect)((function(){i.length?localStorage.setItem("post",JSON.stringify(i)):localStorage.removeItem("post")}),[i]),Object(r.jsx)(j.Provider,{value:b,children:e})},d=s(1),u=s(13),m=s(11),O=s(10),_=(s(21),function(){var t=Object(u.a)({mode:"onBlur"}),e=t.register,s=t.handleSubmit,a=t.getValues,i=t.reset,n=t.formState,o=n.errors,b=n.isValid,_=Object(c.useContext)(j).addedToPosts,x=Object(c.useState)(""),h=Object(l.a)(x,2),p=h[0],N=h[1],f=Object(c.useState)("\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443"),v=Object(l.a)(f,2),P=v[0],g=v[1],L=function(){var t={name:a("name"),body:a("body"),img:p,id:(new Date).getTime()};_(t),g("\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443"),i(),N("")};return Object(r.jsxs)("form",{className:"NewPost",onSubmit:s((function(){L()})),children:[Object(r.jsx)("input",Object(d.a)(Object(d.a)({type:"text"},e("name",{required:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e",minLength:{value:2,message:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"},pattern:{value:"^[a-zA-Z][a-zA-Z0-9-_.]{1,20}$",message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}})),{},{placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f*",className:"NewPost__input"})),Object(r.jsx)("div",{className:"NewPost__errorBlock",children:(null===o||void 0===o?void 0:o.name)&&(null===o||void 0===o?void 0:o.name.message)}),Object(r.jsx)("div",{className:"NewPost__input",children:Object(r.jsxs)("label",{className:"NewPost__uploadLabel",children:[Object(r.jsx)(m.a,{icon:O.a}),Object(r.jsx)("input",{className:"NewPost__uploadInput",type:"file",name:"img",onChange:function(t){return function(t){var e=t.target.files[0];g(e.name);var s=new FileReader;s.readAsDataURL(e),s.onload=function(t){var e=t.target.result;N(e)}}(t)}}),P]})}),Object(r.jsx)("textarea",Object(d.a)({placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430",rows:5,className:"NewPost__input NewPost__input--textarea"},e("body",{}))),Object(r.jsxs)("button",{type:"submit",className:"NewPost__submit-button",disabled:!b,children:[Object(r.jsx)(m.a,{icon:O.b}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"]})]})}),x=(s(22),function(t){var e=t.quantity,s=Object(c.useState)(window.screen.width),a=Object(l.a)(s,2),i=a[0],n=a[1],o=Object(c.useContext)(j),b=o.posts,d=o.removeItem,u=Object(c.useState)([]),m=Object(l.a)(u,2),O=m[0],_=m[1],x=Object(c.useState)(!1),h=Object(l.a)(x,2),p=h[0],N=h[1];return window.addEventListener("resize",(function(){n(window.screen.width)})),Object(c.useEffect)((function(){_(b.reverse().slice(0,5))}),[b]),b&&("all"===e?Object(r.jsx)(r.Fragment,{children:i>768?Object(r.jsxs)("div",{className:"PostsList",children:[Object(r.jsxs)("h2",{children:["\u041e\u0431\u044c\u044f\u0432\u043b\u0435\u043d\u0438\u0439:"," ",b.length]}),Object(r.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:b.map((function(t){return Object(r.jsx)("li",{className:"PostsList__item",children:Object(r.jsxs)("div",{className:"PostsList__block",children:[""!==t.img&&Object(r.jsx)("img",{className:"PostsList__ava",src:t.img,alt:"avatair"}),Object(r.jsxs)("div",{className:"PostsList__info",children:[Object(r.jsx)("p",{className:"PostsList__postAutor",children:t.name}),Object(r.jsx)("p",{children:t.body})]}),Object(r.jsx)("button",{type:"button",className:"PostsList__remove-button",onClick:function(){return d(t.id)},children:"X"})]})},t.id)}))})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{className:"PostsList__showAll-btn",type:"button",onClick:function(){return N(!p)},children:p?"\u0421\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u0441\u0442\u044b":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u0441\u0442\u044b"}),p&&Object(r.jsxs)("div",{className:"PostsList",children:[Object(r.jsxs)("h2",{children:["\u041e\u0431\u044c\u044f\u0432\u043b\u0435\u043d\u0438\u0439:"," ",b.length]}),Object(r.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:b.map((function(t){return Object(r.jsx)("li",{className:"PostsList__item",children:Object(r.jsxs)("div",{className:"PostsList__block",children:[""!==t.img&&Object(r.jsx)("img",{className:"PostsList__ava",src:t.img,alt:"avatair"}),Object(r.jsxs)("div",{className:"PostsList__info",children:[Object(r.jsx)("p",{className:"PostsList__postAutor",children:t.name}),Object(r.jsx)("p",{children:t.body})]}),Object(r.jsx)("button",{type:"button",className:"PostsList__remove-button",onClick:function(){return d(t.id)},children:"X"})]})},t.id)}))})]})]})}):Object(r.jsx)("div",{className:"PostsList PostsList--last",children:Object(r.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:O.map((function(t){return Object(r.jsx)("li",{className:"PostsList__item",children:Object(r.jsxs)("div",{className:"PostsList__block",children:[""!==t.img&&Object(r.jsx)("img",{className:"PostsList__ava",src:t.img,alt:"avatair"}),Object(r.jsx)("span",{className:"PostsList__post",children:t.body}),Object(r.jsx)("button",{type:"button",className:"PostsList__remove-button",onClick:function(){return d(t.id)},children:"X"})]})},t.id)}))})}))}),h=(s(23),function(){return Object(r.jsx)(b,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("div",{className:"App__top",children:[Object(r.jsx)(_,{}),Object(r.jsx)(x,{quantity:"last"})]}),Object(r.jsx)(x,{quantity:"all"})]})})});n.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(h,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.0fc61705.chunk.js.map